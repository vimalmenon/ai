[tox]
requires = tox >= 4
env_list = py313, lint, type-check
isolate_build = true

[testenv]
skip_install = true
allowlist_externals = poetry
commands_pre =
    poetry install
commands =
    poetry run pytest -n auto --cov=ai --cov-report=term-missing --cov-report=html

[testenv:lint]
skip_install = true
allowlist_externals = poetry
commands_pre =
    poetry install
commands =
    poetry run black --check --diff .
    poetry run ruff check
    poetry run flake8 .

[testenv:type-check]
skip_install = true
allowlist_externals = poetry
commands_pre =
    poetry install
commands =
    poetry run mypy ai

[testenv:format]
skip_install = true
allowlist_externals = poetry
commands_pre =
    poetry install
commands =
    poetry run black .
    poetry run isort .
    poetry run autoflake --remove-all-unused-imports --recursive --remove-unused-variables --in-place .
    poetry run ruff check --fix

[testenv:docs]
skip_install = true
allowlist_externals = poetry
commands_pre =
    poetry install
commands =
    echo "Documentation generation environment - add docs tools as needed"

[flake8]
extend-ignore = F401, E203, W503
exclude = .tox,.venv,__pycache__,.git,.pytest_cache
import-order-style = smarkets
max-line-length = 100
per-file-ignores = 
    __init__.py:F401
